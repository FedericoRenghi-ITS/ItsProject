<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista Nomi</title>
  <link rel="stylesheet" href="/styles/api.css" />
</head>
<body>
  <section style="display: flex; flex-direction: column;">
  <div >
    <h1 style="text-align: center; padding: 10px;">Lista cose da fare</h1>
  </div>
  <div class="top">
    <div class="input-area"> 
      <input id="inputNome" type="text" placeholder="Aggiungi cosa da fare" />
      <button id="btnMostra">Mostra Lista</button>
      <button id="btnResetta">Resetta</button>
    </div>

  
    <ul id="listaNomi"></ul>
  </div>
</section>
  <script>
    const nomi = [];
    const selezionati = {};
    const inputNome = document.getElementById("inputNome");
    const btnMostra = document.getElementById("btnMostra");
    const btnResetta = document.getElementById("btnResetta");
    const listaNomi = document.getElementById("listaNomi");

    let listaVisibile = false; // Stato della visualizzazione

    // Aggiunta con il tasto Invio
    inputNome.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const nome = inputNome.value.trim();
        if (nome !== "") {
          humpscare(nome)
          nomi.push(nome);
          inputNome.value = "";
          if (listaVisibile) {
            aggiornaLista(); // aggiorna subito se la lista è visibile
          }
        }
        else {
          inputNome.classList.add("animazione")
          setTimeout(() => {
            inputNome.classList.remove("animazione");
            }, 400);
        };
      }
    });

    // Mostra/Nascondi lista
    btnMostra.addEventListener("click", () => {
      listaVisibile = !listaVisibile;
      if (listaVisibile) {
        aggiornaLista();
        btnMostra.textContent = "Nascondi Lista";
      } else {
        listaNomi.innerHTML = "";
        btnMostra.textContent = "Mostra Lista";
      }
    });

    // Funzione che aggiorna il contenuto della lista
    function aggiornaLista() {
      listaNomi.innerHTML = "";
      nomi.forEach((nome) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.classList.add("nome-btn");

        if (selezionati[nome]) {
          btn.classList.add("selezionato");
          btn.textContent = "✓ " + nome;
        } else {
          btn.textContent = nome;
        }

    btn.addEventListener("click", () => {
      btn.classList.toggle("selezionato");
      if (btn.classList.contains("selezionato")) {
        btn.textContent = "✓ " + nome;
        selezionati[nome] = true;
      } else {
        btn.textContent = nome;
        selezionati[nome] = false;
      }
    });

    li.appendChild(btn);
    listaNomi.appendChild(li);
  });
}

    // Reset totale (array + lista visibile)
    btnResetta.addEventListener("click", () => {
      nomi.length = 0;
      listaNomi.innerHTML = "";
      listaVisibile = false;
      btnMostra.textContent = "Mostra Lista";
      for (let key in selezionati) {
        delete selezionati[key];
      }
    });

    function humpscare(nome) {
      const mappaParole = {
        "banana": "/img/banana.jpg",
        "boss": "/img/boss.jpg",
        "miku": "/img/miku.jpg",
        "goku": "/img/goku.jpg"
        // Aggiungi altre parole chiave → immagine
      };

     
  const chiave = nome.toLowerCase();
  const pathImg = mappaParole[chiave];
  if (!pathImg) return;

  const img = document.createElement("img");
  img.src = pathImg;
  img.classList.add("humpscare-img");

  document.body.appendChild(img);

  setTimeout(() => {
    img.classList.add("hide");
    setTimeout(() => img.remove(), 500);
  }, 2000);
}
    
  </script>

</body>
</html>